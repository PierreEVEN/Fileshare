div.outliner
    if (common.PAGE_CONTEXT.connected_user)
        div.hseparator
        div.category
            p Mes dépôts
            if (common.PAGE_CONTEXT.connected_user.can_create_repos())
                button(onclick='create_repos.open_create_repos_modal()').plus-button +
        div.hseparator
        div.repos-list
            each repos in common.user_repos
                if locals.common.selected_repos && locals.common.selected_repos.id === repos.id
                    button(onclick="window.location.href = '/" + repos.username + "/" + repos.name.encoded() + "'").selected-repos #{repos.display_name.plain()}
                else
                    button(onclick="window.location.href = '/" + repos.username + "/" + repos.name.encoded() + "'") #{repos.display_name.plain()}

    div.hseparator
    div.category
        p Dépôts suivis
    div.hseparator
    div.repos-list
        each repos in common.tracked_repos
            if locals.common.selected_repos && locals.common.selected_repos.id === repos.repos.id
                button(onclick="window.location.href = #{common.get_url_for_repos(repos)}").selected-repos #{repos.repos.name.plain()}
            else
                button(onclick="window.location.href = '/repos/?repos=" + repos.repos.access_key + "'") #{repos.repos.name.plain()}

    div.hseparator
    div.category
        p Dépôts publiques
    div.hseparator
    div.repos-list
        each repos in common.repos_list
            if locals.common.selected_repos && locals.common.selected_repos.id === repos.id
                button(onclick="window.location.href = '/repos/?repos=" + repos.access_key + "'").selected-repos #{repos.name.plain()}
            else
                button(onclick="window.location.href = '/repos/?repos=" + repos.access_key + "'") #{repos.name.plain()}

div.outliner-bg.outliner-bg-hidden(onclick="window.close_outliner()")

div.outliner-burger
    button(onclick="window.open_outliner()")

script(type='module').
    window.open_outliner = () => {
        document.getElementsByClassName('outliner-bg')[0].classList.remove('outliner-bg-hidden');
        document.getElementsByClassName('outliner')[0].classList.add('outliner-extended');
    }

    window.close_outliner = () => {
        document.getElementsByClassName('outliner-bg')[0].classList.add('outliner-bg-hidden');
        document.getElementsByClassName('outliner')[0].classList.remove('outliner-extended');
    }

if locals.force_open_create_repos
    script(type='module').
        create_repos.open_create_repos_modal()
