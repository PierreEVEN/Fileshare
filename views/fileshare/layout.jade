doctype html
html
    head
        title= title
        block css
        link(rel='stylesheet', href='/stylesheets/fileshare/layout.css')
        script(type='module', src='/scripts/index.js')
    body
        // ################################## Global available client modules ##################################
        script.
            const module = {}

        if locals.session_data && locals.session_data.selected_repos
            script.
                const current_repos = {
                name: `!{locals.session_data.selected_repos.name}`,
                access_key: `!{locals.session_data.selected_repos.access_key}`
                };
        else
            script.
                const current_repos = null;


        // ################################## MODAL ##################################
        div(id='modal', onclick="if (event.target === this) module.modal.close_modal()").modal-closed
            div(id='modal-box')
                div(id='modal-content')
                div(id="modal-close-button", onclick="module.modal.close_modal()")
                    p X

        // ################################## ERROR ##################################
        div(id='message-box').message-box-close
            div(id="message-box-close-button", onclick="module.utils.close_message()").cancel-button
                p X
            h1 Erreur
            p(id='message-box-message') Le mot de passe fourni est trop long


        // ################################## APP ##################################
        div.app-container
            div.viewport
                div.toolbar
                    div.title
                        p FileShare
                    if !locals.session_data || !locals.session_data.user
                        div.login-buttons
                            button(onclick = 'module.login_forms.open_modal_signup()') Nouveau Compte
                            button(onclick = 'module.login_forms.open_modal_signin()') Connexion
                    else
                        div.login-buttons
                            p.Username Bonjour #{session_data.user.username} !
                            button(onclick='module.login_forms.logout()') DÃ©connexion

                block content


    if locals.force_login
        script(type='module').
            module.login_forms.open_modal_signin()

    if locals.force_signin
        script(type='module').
            module.login_forms.open_modal_signup()